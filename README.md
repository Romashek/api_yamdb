# API для Yatube
## Описание
Проект YaMDb собирает отзывы пользователей на произведения. Сами произведения в YaMDb не хранятся, здесь нельзя посмотреть фильм или послушать музыку.

Произведения делятся на категории, такие как «Книги», «Фильмы», «Музыка». Список категорий (Category) может быть расширен администратором.
Произведению может быть присвоен жанр из списка предустановленных (например, «Баллада», «Вестерн» или «Детектив»).
Добавлять произведения, категории и жанры может только администратор.

Пользователи могут оставляют текстовые отзывы и ставить оценку от одного до десяти (целое число); из пользовательских оценок формируется средняя оценка произведения — рейтинг (целое число). На одно произведение пользователь может оставить только один отзыв.
Пользователи могут оставлять комментарии к отзывам.
Добавлять отзывы, комментарии и ставить оценки могут только аутентифицированные пользователи.

### Также существуют следующие роли: 
Аноним — может просматривать описания произведений, читать отзывы и комментарии.

Аутентифицированный пользователь — может читать, может публиковать и редактировать свои отзывы и ставить оценки, может комментировать и редактировать свои отзывы; Роль присваивается новым пользователям.

Модератор — Все права аутентифицированного пользователя плюс право удалять и редактировать любые отзывы и комментарии.

Администратор — полные права на управление всем контентом проекта. Может назначать роли пользователям.

## Содержание
- [Стек использованных технологий](#технологии)
- [Начало работы](#начало-работы)
- [Документация](#документация)
- [Примеры запросов и ответов](#запросы-и-ответы)
- [Команда проекта](#команда-проекта)
- [Источники](#источники)

## Стек использованных технологий
- Python 3.9.13
- Django==3.2
- djangorestframework==3.12.4
- PyJWT==2.1.0
- SQLite


## Начало работы
Клонировать репозиторий и перейти в него в командной строке:
```
git clone https://github.com/Romashek/api_yamdb.git
```

Cоздать и активировать виртуальное окружение:
```
python -m venv venv
source venv/scripts/activate
```

Установить зависимости из файла requirements.txt:
```
pip install -r requirements.txt
```

Выполнить миграции:
```
python manage.py migrate
```

Создать базу данных на основе csv-файлов в static/data/:
```
python manage.py import_csv static/data
```

Запустить проект:
```
python manage.py runserver
```

## Документация и примеры запросов

#### Документация
Чтобы открыть документацию к проекту, после запуска сервера, перейдите по адресу http://127.0.0.1:8000/redoc/

#### Примеры запросов и ответов
В результате GET запросов к api, будем получать данные в формате application/json.
- http://127.0.0.1:8000/api/v1/categories/
```typescript
Результат.
{
    "count": 3,
    "next": null,
    "previous": null,
    "results": [
        {
            "name": "Книга",
            "slug": "book"
        },
        {
            "name": "Музыка",
            "slug": "music"
        },
        {
            "name": "Фильм",
            "slug": "movie"
        }
    ]
}
```
В результате GET запросов к api, будем получать данные в формате application/json.
- http://127.0.0.1:8000/api/v1/titles/0/
```typescript
Результат.
{
    "id": 0,
    "category": {
        "name": "Книга",
        "slug": "book"
    },
    "genre": [
        {
            "name": "Классика",
            "slug": "classical"
        }
    ],
    "rating": 5,
    "name": "Колобок",
    "year": 1950,
    "description": "Сказка о колобке"
}
```
- http://127.0.0.1:8000/api/v1/titles/0/reviews/0/
```typescript
Результат.
{
    "id": 0,
    "text": "Отличная сказка",
    "author": "admin-user",
    "score": 8,
    "pub_date": "2025-03-29T09:46:24.174217Z"
}
```
В случае попытки изменить не свои данные получим ошибку 403 и сообщение.
-http://127.0.0.1:8000/api/v1/titles/0/reviews/0comments/0/
```typescript
Результат.
{
"detail": "У вас недостаточно прав для выполнения данного действия."
}
```

## Команда проекта
Разработкой занимались:
- [Роман Кондрашов](https://github.com/Romashek) — TeamLeader, Backend Engineer
- [Роман Антонов](https://github.com/Romaars228) — Backend Engineer
- [Даниил Миколайчук](https://github.com/Daniil-Mikolaychuk) — Backend Engineer
- Игорь Шкода - Научный руководитель

## Источники
Учебный проект Яндекс-практикум.